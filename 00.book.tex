\documentclass[pdftex,12pt, oneside]{article}

%\usepackage[paperwidth=8.5in, paperheight=13in]{geometry} % Folio
\usepackage[paperwidth=8.27in, paperheight=11.69in]{geometry} % A4

\usepackage{makeidx}         % allows index generation
\usepackage{graphicx}        % standard LaTeX graphics tool
                             % when including figure files
\usepackage[bottom]{footmisc}% places footnotes at page bottom
\usepackage[english]{babel}
\usepackage{enumerate}
\usepackage{paralist}
\usepackage{float}
\usepackage{gensymb}  
\usepackage{listings}
\usepackage{color}
\usepackage{mathtools} % atau \usepackage{amsmath}
\renewcommand{\baselinestretch}{1.5}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolor}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolor},
  commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  stringstyle=\color{codepurple},
  basicstyle=\footnotesize,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  keepspaces=true,
  numbers=left,
  numbersep=5pt,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2
}

\lstset{style=mystyle}


\begin{document}
\sloppy % biar section ga melebar melewati kertas

\begin{center}
{\large \textit{SOURCE CODE} PROGRAM \textit{WEB SERVICE} PBB-P2.}
\\[1cm]
25 November 2016\\
Priyanto Tamami, S.Kom.
\end{center}

%\frontmatter%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{\textit{SOURCE CODE} PEMBUATAN TABEL}

\textit{Source code} untuk pembuatan tabel menggunakan bahasa SQL biasa, adapun tabel yang digunakan ada 4 (empat) buah dengan rincian sebagai berikut :


  \subsection{Tabel SPPT}
  
  Tabel ini sudah ada terlebih dahulu sebagai tempat untuk menampung seluruh ketetapan yang ada pada PBB-P2, \textit{source code} dari pembuatan tabel SPPT ini adalah sebagai berikut :
  
  \begin{lstlisting}
CREATE TABLE SPPT (
  KD_PROPINSI CHAR(2) NOT NULL,
  KD_DATI2 CHAR(2) NOT NULL,
  KD_KECAMATAN CHAR(3) NOT NULL,
  KD_KELURAHAN CHAR(3) NOT NULL,
  KD_BLOK CHAR(3) NOT NULL,
  NO_URUT CHAR(4) NOT NULL, 
  KD_JNS_OP CHAR(1) NOT NULL, 
  THN_PAJAK_SPPT CHAR(4) NOT NULL,
  SIKLUS_SPPT NUMBER(2,0) NOT NULL,
  KD_KANWIL_BANK CHAR(2) NOT NULL,
  KD_KPPBB_BANK CHAR(2) NOT NULL,
  KD_BANK_TUNGGAL CHAR(2) NOT NULL,
  KD_BANK_PERSEPSI CHAR(2) NOT NULL,
  KD_TP CHAR(2) NOT NULL,
  NM_WP_SPPT VARCHAR2(30) NOT NULL,
  JLN_WP_SPPT VARCHAR2(30) NOT NULL,
  BLOK_KAV_NO_WP_SPPT VARCHAR2(30),
  RW_WP_SPPT CHAR(2),
  RT_WP_SPPT CHAR(3),
  KELURAHAN_WP_SPPT VARCHAR2(30),
  KOTA_WP_SPPT VARCHAR2(30),
  KD_POS_WP_SPPT VARCHAR2(5),
  NPWP_SPPT VARCHAR2(15),
  NO_PERSIL_SPPT VARCHAR2(5),
  KD_KLS_TANAH CHAR(3) DEFAULT 'XXX' NOT NULL,
  THN_AWAL_KLS_TANAH CHAR(4) DEFAULT '1986' NOT NULL,
  KD_KLS_BNG CHAR(3) DEFAULT 'XXX' NOT NULL,
  THN_AWAL_KLS_BNG CHAR(4) DEFAULT '1986' NOT NULL,
  TGL_JATUH_TEMPO_SPPT DATE NOT NULL,
  LUAS_BUMI_SPPT NUMBER(12,0) DEFAULT 0 NOT NULL,
  LUAS_BNG_SPPT NUMBER(12,0) DEFAULT 0 NOT NULL,
  NJOP_BUMI_SPPT NUMBER(15,0) DEFAULT 0 NOT NULL,
  NJOP_BNG_SPPT NUMBER(15,0) DEFAULT 0 NOT NULL,
  NJOP_SPPT NUMBER(15,0) NOT NULL,
  NJOPTKP_SPPT NUMBER(8,0) NOT NULL,
  NJKP_SPPT NUMBER(5,2),
  PBB_TERHUTANG_SPPT NUMBER(15,0) NOT NULL,
  FAKTOR_PENGURANG_SPPT NUMBER(12,0),
  PBB_YG_HARUS_DIBAYAR_SPPT NUMBER(15,0) NOT NULL,
  STATUS_PEMBAYARAN_SPPT CHAR(1) DEFAULT '0' NOT NULL,
  STATUS_TAGIHAN_SPPT CHAR(1) DEFAULT '0' NOT NULL,
  STATUS_CETAK_SPPT CHAR(1) DEFAULT '0' NOT NULL,
  TGL_TERBIT_SPPT DATE NOT NULL,
  TGL_CETAK_SPPT DATE DEFAULT SYSDATE NOT NULL,
  NIP_PENCETAK_SPPT CHAR(9) NOT NULL,
  CONSTRAINT PK_E6 PRIMARY KEY (KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT, KD_JNS_OP, THN_PAJAK_SPPT)
  FOREIGN KEY (NIP_PENCETAK_SPPT) REFERENCES PEGAWAI(NIP),
  FOREIGN KEY (KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT,       KD_JNS_OP) REFERENCES DAT_OBJEK_PAJAK(KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT, KD_JNS_OP),
  FOREIGN KEY (KD_KANWIL_BANK, KD_KPPBB_BANK, KD_BANK_TUNGGAL, KD_BANK_PERSEPSI, KD_TP) REFERENCES TEMPAT_PEMBAYARAN(KD_KANWIL, KD_KPPBB, KD_BANK_TUNGGAL, KD_BANK_PERSEPSI, KD_TP),
  FOREIGN KEY(KD_KLS_BNG, THN_AWAL_KLS_BNG) REFERENCES KELAS_BANGUNAN(KD_KLS_BNG, THN_AWAL_KLS_BNG),
  FOREIGN KEY(KD_KLS_TANAH, THN_AWAL_KLS_TANAH) REFERENCES KELAS_TANAH(KD_KLS_TANAH, THN_AWAL_KLS_TANAH)
);    
  \end{lstlisting}
  
  \subsection{Tabel PEMBAYARAN\_SPPT}
  
  Tabel ini pun sudah ada pada basis data yang digunakan sebagai tempat menyimpan atau mencatat transaksi pembayaran. \textit{Source code} dari pembuatan tabel ini adalah sebagai berikut :
  
  \begin{lstlisting}
CREATE TABLE PEMBAYARAN_SPPT (
  KD_PROPINSI CHAR(2) NOT NULL,
  KD_DATI2 CHAR(2) NOT NULL,
  KD_KECAMATAN CHAR(3) NOT NULL,
  KD_KELURAHAN CHAR(3) NOT NULL,
  KD_BLOK CHAR(3) NOT NULL,
  NO_URUT CHAR(4) NOT NULL,
  KD_JNS_OP CHAR(1) NOT NULL,
  THN_PAJAK_SPPT CHAR(4) NOT NULL,
  PEMBAYARAN_SPPT_KE NUMBER(2,0) NOT NULL,
  KD_KANWIL_BANK CHAR(2) NOT NULL,
  KD_KPPBB_BANK CHAR(2) NOT NULL,
  KD_BANK_TUNGGAL CHAR(2) NOT NULL,
  KD_BANK_PERSEPSI CHAR(2) NOT NULL,
  KD_TP CHAR(2) NOT NULL,
  DENDA_SPPT NUMBER(12,0),
  JML_SPPT_YG_DIBAYAR NUMBER(15,0) NOT NULL,
  TGL_PEMBAYARAN_SPPT DATE NOT NULL,
  TGL_REKAM_BYR_SPPT DATE DEFAULT SYSDATE NOT NULL,
  NIP_REKAM_BYR_SPPT CHAR(9) NOT NULL,
  CONSTRAINT PK_G1 PRIMARY KEY(KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT, KD_JNS_OP, THN_PAJAK_SPPT, PEMBAYARAN_SPPT_KE, KD_KANWIL_BANK, KD_KPPBB_BANK, KD_BANK_TUNGGAL, KD_BANK_PERSEPSI, KD_TP),
  FOREIGN KEY (NIP_REKAM_BYR_SPPT) REFERENCES PEGAWAI(NIP),
  FOREIGN KEY (KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT, KD_JNS_OP, THN_PAJAK_SPPT) REFERENCES SPPT(KD_PROPINSI, KD_DATI2, KD_KECAMATAN, KD_KELURAHAN, KD_BLOK, NO_URUT, KD_JNS_OP, THN_PAJAK_SPPT),
  FOREIGN KEY (KD_KANWIL_BANK, KD_KPPBB_BANK, KD_BANK_TUNGGAL, KD_BANK_PERSEPSI, KD_TP) REFERENCES TEMPAT_PEMBAYARAN(KD_KANWIL, KD_KPPBB, KD_BANK_TUNGGAL, KD_BANK_PERSEPSI, KD_TP)
);
  \end{lstlisting}
  
  \subsection{Tabel LOG\_TRX\_PEMBAYARAN}
  
  Tabel ini digunakan untuk menyimpan atau mencatat proses transaksi pembayaran yang berhasil dilakukan. \textit{Source code} untuk tabel LOG\_TRX\_PEMBAYARAN ini adalah sebagai berikut :
  
  \begin{lstlisting}    
CREATE TABLE LOG_TRX_PEMBAYARAN (	
  NOP VARCHAR2(18 BYTE) NOT NULL,
  THN VARCHAR2(4 BYTE) NOT NULL,
  NTPD VARCHAR2(30 BYTE) NOT NULL,
  POKOK NUMBER,
  NAMA_WP VARCHAR2(50 BYTE),
  ALAMAT_OP VARCHAR2(150 BYTE),
  MATA_ANGGARAN VARCHAR2(15 BYTE),
  MA_SANKSI VARCHAR2(20 BYTE),
  DENDA NUMBER,
  PEMBAYARAN_KE NUMBER(2,0),
  IP_CLIENT VARCHAR2(30 BYTE),
  CONSTRAINT LOG_TRX_PEMBAYARAN_PK PRIMARY KEY 
    ("NOP", "THN", "NTPD"));  
  \end{lstlisting}
  
  \subsection{Tabel LOG\_REVERSAL}
  
  Tabel ini digunakan untuk mencatat historis transaksi \textit{reversal} pembayaran yang telah selesai dilakukan. \textit{Source code} untuk tabel ini adalah sebagai berikut :
  
  \begin{lstlisting}
CREATE TABLE LOG_REVERSAL (	
  NOP VARCHAR2(20 BYTE) NOT NULL,
  THN VARCHAR2(4 BYTE) NOT NULL,
  NTPD VARCHAR2(30 BYTE) NOT NULL,
  IP_CLIENT VARCHAR2(30 BYTE),
  CONSTRAINT LOG_REVERSAL_PK PRIMARY KEY ("NOP", "THN", "NTPD"));    
  \end{lstlisting}


\section{\textit{SOURCE CODE STORE PROCEDURE}}


\section{\textit{SOURCE CODE BUILD TOOLS}}


\section{\textit{SOURCE CODE} KONFIGURASI application.properties}


\section{\textit{SOURCE CODE} KONFIGURASI log4j.properties}


\section{\textit{SOURCE CODE} AppConfig.java}


\section{\textit{SOURCE CODE} HibernateConfiguration.java}


\section{\textit{SOURCE CODE} SerialConstant.java}


\section{\textit{SOURCE CODE} StatusRespond.java}


\section{\textit{SOURCE CODE} SpptRestController.java}


\section{\textit{SOUCE CODE} StoreProceduresDao.java}


\section{\textit{SOURCE CODE} StoreProceduresDaoImpl.java}


\section{\textit{SOURCE CODE} AppInitializer.java}


\section{\textit{SOURCE CODE} PembayaranSppt.java}


\section{\textit{SOURCE CODE} ReversalPembayaran.java}


\section{\textit{SOURCE CODE} Sppt.java}


\section{\textit{SOURCE CODE} Status.java}


\section{\textit{SOURCE CODE} StatusInq.java}


\section{\textit{SOURCE CODE} StatusRev.java}


\section{\textit{SOURCE CODE} StatusTrx.java}


\section{\textit{SOURCE CODE} PembayaranServices.java}


\section{\textit{SOURCE CODE} PembayaranServicesImpl.java}


\section{\textit{SOURCE CODE} ReversalServices.java}


\section{\textit{SOURCE CODE} ReversalServicesImpl.java}


\section{\textit{SOURCE CODE} SpptServices.java}


\section{\textit{SOURCE CODE} SpptServicesImpl.java}


\end{document}